pipeline {
	agent any
	def rtMaven = Artifactory.newMavenBuild()
    	def buildInfo
   	rtMaven.tool = "maven"
	tools {
		maven "maven"
	}
	
	parameters { 
         string(name: 'tomcat_qa', defaultValue: '18.191.168.82', description: 'QA Server')
         string(name: 'tomcat_prod', defaultValue: '18.220.138.54', description: 'Production Server')
    } 
    stages {
    stage('blaze') {
		steps {
		 blazeMeterTest credentialsId: 'perf', testId: '7889218.taurus', workspaceId: '474121'
		}
    }
    stage('Clone sources') {
        git url: 'https://github.com/rajkumarbalasubramanian/WebApp.git'
   }
    stage('Maven Compile') {
        buildInfo = rtMaven.run pom: 'pom.xml', goals: 'clean compile'
   }
   stage('Build Project') {
	 rtMaven.run pom: 'pom.xml', goals: 'clean package' 
   }
    stage('functional test') {
    	rtMaven.run pom: 'functionaltest/pom.xml', goals: 'test' 
    }
    
     stage('sanity test') {
    	rtMaven.run pom: 'Acceptancetest/pom.xml', goals: 'test' 
    }
    
    
   }
}
    
